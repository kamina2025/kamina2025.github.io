document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("magnetLinkInput"),n=document.getElementById("downloadButton"),o=document.getElementById("output"),t=new WebTorrent;n.addEventListener("click",()=>{let n=e.value.trim();if(!n){o.innerHTML='<p style="color: red;">Por favor, ingresa un Magnet Link v치lido.</p>';return}o.innerHTML="<p>Iniciando descarga/reproducci칩n...</p>",t.add(n,e=>{o.innerHTML="<p>Torrent a침adido: "+e.name+"</p>",console.log("Cliente WebTorrent est치 descargando:",e.name),e.on("download",()=>{let n=(100*e.progress).toFixed(1);o.innerHTML=`<p>Descargando: ${e.name} (${n}%) - Velocidad: ${formatBytes(e.downloadSpeed)}/s - Pares: ${e.numPeers}</p>`}),e.on("done",()=>{o.innerHTML+='<p style="color: green;">Descarga completada!</p>',console.log("Torrent descarga completada!")}),e.files.forEach(e=>{if(e.name.endsWith(".mp4")||e.name.endsWith(".webm")||e.name.endsWith(".ogg")){let n=document.createElement("video");n.controls=!0,n.autoplay=!0,n.style.maxWidth="100%",n.style.display="block",n.style.marginTop="15px",o.appendChild(n),e.renderTo(n),o.innerHTML+=`<p>Reproduciendo: ${e.name}</p>`}else{let n=document.createElement("a");n.href="#",n.textContent=`Descargar: ${e.name}`,n.style.display="block",n.style.marginTop="10px",n.onclick=n=>{n.preventDefault(),e.getBlobURL((n,o)=>{if(n)return console.error(n);let t=document.createElement("a");t.href=o,t.download=e.name,t.click()})},o.appendChild(n)}})}),t.on("error",e=>{console.error("WebTorrent Error:",e.message),o.innerHTML=`<p style="color: red;">Error en WebTorrent: ${e.message}</p>`})})});function formatBytes(e,n=2){if(0===e)return"0 Bytes";let o=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,o)).toFixed(n<0?0:n))+" "+["Bytes","KB","MB","GB","TB"][o]}
//# sourceMappingURL=kamina2025.github.io.a2e3f2e1.js.map
